"use strict";(self.webpackChunkwindow_app=self.webpackChunkwindow_app||[]).push([[179],{157:(S,$,m)=>{var U=m(935),f=m(294),pe=m(711),de=m(184),d=m.n(de);function z(t){const{text:e,block:n,inlineBlock:i,profix:r}=t;return React.createElement("span",{"data-profix":r,className:d()({"command-view-text":!0,"root-inline-block":n===void 0&&i,"root-block":n})},e)}function he(t){const{onRead:e,defaultInput:n,value:i,focus:r,readonly:o=!1,onInput:s,defineRef:a}=t,[u,c]=(0,f.useState)(i!=null?i:"");(0,f.useLayoutEffect)(()=>{!o&&r&&a.current.focus()},[r]);const p=v=>{let g=v.target.value;c(g),s==null||s({type:"push",payload:g})},h=v=>{if(v.code==="Backspace"){s==null||s({type:"delete",payload:null});return}v.code==="Enter"&&(e==null||e(u),a.current.blur())};return React.createElement("input",{ref:a,onKeyDown:h,className:"command-read",type:"text",defaultValue:n,value:i,onChange:p})}function me(t){const{text:e,profix:n,focus:i,readonly:r,onEnter:o,value:s,defaultInput:a}=t,[u,c]=(0,f.useState)(s!=null?s:":"),[p,h]=(0,f.useState)(i),v=(0,f.useRef)(null),g=()=>{v.current.focus()},k=M=>{o==null||o({label:e,value:M})},H=({type:M,payload:ue})=>{let I=u;M==="delete"?I=I.slice(0,I.length-1):M==="push"&&(I=u+ue.slice(ue.length-1)),c(I)};return React.createElement("div",{key:e,className:"t-line-wrapper",onClick:g},React.createElement(z,{profix:n,text:e+u}),React.createElement(he,{focus:p,defineRef:v,readonly:r,value:"",onInput:H,defaultInput:a,onRead:k}))}const fe=t=>{const{commandList:e,onEnter:n}=t,i=(0,f.useMemo)(()=>{let r=[];for(let o=0,s=e.length;o<s;o++){let{fileStreamPath:a,profix:u="$",awaitRead:c,bindCommandOfResolver:p}=e[o];if(typeof a=="string"){r.push(React.createElement(z,{profix:u,key:a,block:!0,text:a}));continue}if(Array.isArray(p)){p.reduce((h,v)=>(h.push(React.createElement(z,{profix:"",key:v.label,block:!0,text:v.label})),h),r);continue}if(typeof c=="object"){const{focus:h,value:v,defaultInput:g,readLabel:k,readonly:H}=c;r.push(React.createElement(me,{onEnter:n,key:k,text:k,profix:u,value:v,defaultInput:g,readonly:H,focus:h}))}}return r},[e,n]);return React.createElement("article",{className:d()("terminal-views")},i)};var P=m(974);const K={get(t,e=sessionStorage){let n=e.getItem(t);if(n==null)return null;try{return JSON.stringify(n)}catch(i){return n}},set(t,e,n=sessionStorage){let i=e;try{i=JSON.stringify(i)}catch(r){}n.setItem(t,i)},delete(t,e=sessionStorage){return e.removeItem(t)},clear(t=sessionStorage){t.clear()}};var ve=Object.defineProperty,Ee=(t,e,n)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e,n)=>(Ee(t,typeof e!="symbol"?e+"":e,n),n),we=(t=>(t.break="break",t.delete="delete",t))(we||{});class ye{constructor(e){C(this,"pendingUnsubscribe",{}),C(this,"eventStore",new Map),C(this,"observer"),C(this,"channel"),this.observer=e==null?void 0:e.observer;let n=new MessageChannel;this.channel=n.port1,n.port2.addEventListener("message",this.onPort.bind(this)),n.port2.start()}onPort(e){this.run(e.data.type,e.data.argv)}run(e,n){var i;let r=this.eventStore.get(e);if(!(r instanceof Set)){console.warn(`EventControll: ${e}\u7C7B\u578B\u4E8B\u4EF6\u6682\u65F6\u6CA1\u6709\u8BA2\u9605\u8005`);return}let o=Array.from(r),s=this.pendingUnsubscribe[e]=[];for(let a=0,u=o.length;a<u;a++){let c=o[a];try{let p=c(...n),h=(i=this.observer)==null?void 0:i.call(this,e,p,...n);if(h==="break")return;h==="delete"&&s.push(c)}catch(p){console.log(`EventControll: ${e} ->  \u6267\u884C${c.name} \u65F6\u53D1\u751F\u9519\u8BEF\r
`,p)}}for(;s.length>0;)s.shift()();s=this.pendingUnsubscribe[e]=null}subscribe(e,n){let i=this.eventStore.get(e);i===void 0&&this.eventStore.set(e,i=new Set),i.add(n);let r=()=>{Array.isArray(this.pendingUnsubscribe[e])?this.pendingUnsubscribe[e].push(r):i.delete(n),r=null,i.size===0&&this.eventStore.delete(e)};return r}once(e,n){const i=(...o)=>(n(...o),r(),null);let r=this.subscribe(e,i)}dispatch(e,...n){let{type:i=e,payload:r=n,emitType:o="sync"}=e;switch(o){case"async":return this.channel.postMessage({type:i,argv:r});case"sync":return this.run(i,r);default:console.warn("Exx");break}}has(e,n){let i;return this.eventStore.has(e)&&(i=this.eventStore.get(e)),i!==void 0?i.has(n):!1}clear(e){return this.eventStore.delete(e)}}var E=(t=>(t.hidden="hidden",t.cancel="cancel",t.fullScreen="fullScreen",t.appChange="change",t.priority="priority",t))(E||{});const w=new ye;var Re=Object.defineProperty,X=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,Y=(t,e,n)=>e in t?Re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Se=(t,e)=>{for(var n in e||(e={}))be.call(e,n)&&Y(t,n,e[n]);if(X)for(var n of X(e))ge.call(e,n)&&Y(t,n,e[n]);return t},W=(t=>(t.hidden="hidden",t.visible="visible",t.cancel="cancel",t.deletion="deletion",t))(W||{});const T=new WeakMap,F=new Set;let R=[];function xe(t,e){T.set(t,e),F.add(t),Ce(!0),Q(t),w.dispatch(E.priority,null,null)}function ht(t){Ae()}globalThis.getALl=()=>V();function V(){return Array.from(F).filter(t=>b(t).status==="visible")}function b(t){return T.get(t)}function J(t,e){T.set(t,e)}function Ae(){return F.size>0}const Z=(t,e)=>{let n=Ne(t,e);n.status="hidden",J(t,n),w.dispatch({type:E.appChange,emitType:"sync"},t,n)},Ie=t=>{},Pe=t=>{};let x=null;function Ce(t){if(t){if(w.has(E.hidden,Z))return;(x!=null?x:x=[]).push(w.subscribe(E.hidden,Z),w.subscribe(E.cancel,Ie),w.subscribe(E.fullScreen,Pe));return}let e=x;x=null,e.forEach(n=>n())}function Fe(t){if(F.has(t)){let e=b(t);return e.status="visible",e}return{status:"visible",position:{x:t.position.x,y:t.position.y},windowSize:Se({},t.windowSize),bindWindow:[],priority:10,viewerState:null}}function Ne(t,e){let n=b(t),i={};return J(t,G(i,n,e)),i}function G(t,e,n){let i=Object.keys(e);for(let r of i){let o=e[r],s=n[r];if(typeof s=="undefined"){t[r]=o;continue}if(typeof o=="object"){t[r]=G({},o,s);continue}t[r]=s}return t}function Q(t){R=R.filter(e=>e!==t),b(t).priority=j.rootTopLevel,R.push(t),Me()}function Le(){return R[R.length-1]}function Oe(t){return Le()===t}var j=(t=>(t[t.rootTopLevel=500]="rootTopLevel",t))(j||{});const ke=10;function Me(){R.slice(0,R.length-1).forEach(t=>{let e=b(t);e.priority=e.priority-ke})}const q=Object.create(null),ee=Object.create(q);ne(ee,{appId:"setUp",appName:"SetUp",readonly:!0,appIcon:"icon-shezhi",position:{x:300,y:300},windowSize:{w:700,h:900},themeStyle:{}});const te=Object.create(q);ne(te,{appId:"App",appName:"App",readonly:!0,appIcon:"icon-shezhi",position:{x:300,y:300},windowSize:{w:0,h:0},themeStyle:{}});const Ue=[ee,te];function ne(t,e){for(let[n,i]of Object.entries(e))t[n]=i}function ze(){return Ue}function mt(t){return activeAppSet.has(t)}const ie="laodsymol";function We(){return K.get(ie)===null}function Te(){return K.set(ie,!0)}const re=[{awaitRead:{readLabel:"username"}},{awaitRead:{readLabel:"password"}}];let N=1,Ve=1;const je=t=>{const{}=t,[e,n]=(0,f.useState)(re.slice(0,N)),[i,r]=(0,f.useState)(!1),o=(0,P.s0)(),s=a=>{let u=[];if(N===Ve){let c=re[N];c.awaitRead.focus=!0,u=u.concat(c)}else{u.push({bindCommandOfResolver:[{label:"loading..."}]}),Te();let c=setTimeout(()=>{r(!0);let p=setTimeout(()=>{clearTimeout(p),clearTimeout(c),o(-1)},2e3)},1500)}n(c=>c.map(p=>{var h;return((h=p.awaitRead)==null?void 0:h.readLabel)===a.label&&(p.awaitRead.value=a.value),p}).concat(u)),N++};return React.createElement("section",{className:d()("full-container","profile-container")},React.createElement("div",{className:d()("container-entry-background",!i&&"container-wrapper-image")},React.createElement("div",{className:d()("left","common",{"transform-left":i})}),React.createElement("div",{className:d()("right","common",{"transform-right":i})}),React.createElement("div",{className:d()({"entry-text":!0,hidden:!0,"show-text":i})},"\u4F60\u597D~")),React.createElement("div",{className:d()("terminl-container-bottom",i&&"hidden")},React.createElement("p",{className:"text"},"\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C\u5173\u4E8E\u6211\uFF0C \u6211\u662F\u4F60\u6CA1\u6709\u8840\u7F18\u5173\u7CFB\u7684\u4EB2\u7238\u7238"),React.createElement(fe,{commandList:e,onEnter:s,key:"1123"})))},Be=t=>{const{children:e}=t;return React.createElement("footer",{className:d()("footer-container")},React.createElement("div",{className:"footer-children"},e))};var _e=m(245);const L=(0,_e.Z)({scriptUrl:"//at.alicdn.com/t/font_3005034_1qqk9c05ql1.js"}),De=t=>{const{appName:e,onStartUpApp:n,appInstance:i}=t,r=()=>{n==null||n(i)};return React.createElement("section",{className:d()("app-entry-container")},React.createElement("div",{className:"app-entry-icon",onClick:r},React.createElement("div",{className:"hover-wrapper"},React.createElement(L,{type:i.appIcon}))),React.createElement("footer",{className:"app-entry-name"},e))},He=t=>{const{children:e}=t;return React.createElement("main",{className:d()("window-default-style")},e)};function $e(t,e=300){let n=null;return(...i)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...i)},e)}}var ae=m(486),Ke=Object.defineProperty,Xe=(t,e,n)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e,n)=>(Xe(t,typeof e!="symbol"?e+"":e,n),n);function Ye(t){let e={data:t,next:null,prev:null};return e.next=e,e.prev=e,e}class Je{constructor(){O(this,"header",null),O(this,"current",null),O(this,"next",(0,ae.bind)(function(){this.current=this.current.next},this)),O(this,"prev",(0,ae.bind)(function(){this.current=this.current.prev},this))}get currentData(){return this.current.data}push(e){let n=Ye(e);if(this.header===null){this.header=n,this.current=this.header;return}n.next=this.header.next,this.header.next.prev=n,this.header.next=n,n.prev=this.header,this.header=n}}const B=new Map;function _(t,e){let n=B.get(t);if(n===void 0){n=new Je,n.push(e),B.set(t,n);return}n.push(e)}function Ze(t){return B.get(t)}var Ge=Object.defineProperty,oe=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable,D=(t,e,n)=>e in t?Ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,se=(t,e)=>{for(var n in e||(e={}))Qe.call(e,n)&&D(t,n,e[n]);if(oe)for(var n of oe(e))qe.call(e,n)&&D(t,n,e[n]);return t},l=(t,e,n)=>(D(t,typeof e!="symbol"?e+"":e,n),n);class et extends f.Component{constructor(e){super(e);l(this,"appInstance"),l(this,"appChildren"),l(this,"view"),l(this,"windownPosition"),l(this,"winowSize"),l(this,"activeApp"),l(this,"containerElement"),l(this,"startPosition",null),l(this,"mouseMove",null),l(this,"keyDownListener",n=>{let i={x:n.clientX-this.windownPosition.x,y:n.clientY-this.windownPosition.y};this.startPosition=i,this.mouseMove=this.handleMouseMove,n.target.setPointerCapture(n.pointerId),this.setState({position:se({},this.windownPosition)}),this.containerSize={x:document.body.clientWidth,y:document.body.clientHeight}}),l(this,"containerSize",null),l(this,"handleMouseMove",n=>{let{clientX:i,clientY:r}=n;if(i<=50||this.containerSize.x-i<=50||r<=50||Math.abs(r-this.containerSize.y)<=170||this.startPosition===null)return;let{x:o,y:s}=this.startPosition;this.setState({position:{x:i-o,y:r-s}})}),l(this,"keyUpListener",n=>{this.state.position!==null&&(this.windownPosition=this.state.position),this.startPosition=null,this.mouseMove=null,n.target.releasePointerCapture(n.pointerId),this.setState({position:null})}),l(this,"transitionend"),l(this,"isEnd",!1),l(this,"transitionendListener",()=>{var n,i;this.isEnd||(this.transitionend=void 0,this.isEnd=!this.isEnd,(i=(n=this.props).apprReRender)==null||i.call(n),w.dispatch(E.hidden,this.appInstance,{position:se({},this.windownPosition)}))}),l(this,"handleAppHidden",()=>{this.state.isElementFullScreen||(this.setState({appStatus:W.hidden}),this.transitionend=this.transitionendListener)}),l(this,"handleAppCancel",()=>{!this.state.isElementFullScreen}),l(this,"fullscreenChangeMoniter",n=>{this.setState(i=>({isElementFullScreen:!i.isElementFullScreen}))}),l(this,"handleAppFullScreen",$e(()=>{this.state.isElementFullScreen?document.exitFullscreen():this.containerElement.requestFullscreen()})),l(this,"bindHtmlElement",n=>this.containerElement=n),l(this,"containerClick",()=>{Oe(this.appInstance)||(Q(this.appInstance),w.dispatch(E.priority,null,null))}),l(this,"next",()=>{this.view.next(),this.forceUpdate()}),l(this,"prev",()=>{this.view.prev(),this.forceUpdate()}),this.appInstance=e.appInstance,this.activeApp=b(this.appInstance),this.windownPosition=this.activeApp.position,this.winowSize=this.activeApp.windowSize,this.view=Ze(this.appInstance.appId),this.state={position:null,appStatus:this.activeApp.status,isElementFullScreen:!1}}componentDidMount(){this.containerElement.addEventListener("fullscreenchange",this.fullscreenChangeMoniter),this.changeRootElementLevel(),w.subscribe(E.priority,this.changeRootElementLevel.bind(this))}componentWillUnmount(){this.containerElement.removeEventListener("fullscreenchange",this.fullscreenChangeMoniter)}changeRootElementLevel(){this.containerElement.style.setProperty("z-index",String(this.activeApp.priority)),this.forceUpdate()}pushState(){}popState(){}memo(){}getMemo(){}render(){var e,n;const{position:i,appStatus:r,isElementFullScreen:o}=this.state;let s={left:this.windownPosition.x,top:this.windownPosition.y};if(i!==null){let{x:p,y:h}=i;s={transform:`translate(${p}px, ${h}px)`}}let a={width:this.winowSize.w,height:this.winowSize.h},u=Object.assign(a,s);//! 视图可能为空
const c=(n=(e=this.view)==null?void 0:e.currentData)!=null?n:()=>React.createElement("div",null,"123");return React.createElement("section",{style:u,onClick:this.containerClick,onTransitionEnd:this.transitionend,className:d()("app-window-default-size","app-window",{"app-window-active ":this.activeApp.priority===j.rootTopLevel,"visible-hidden":r===W.hidden}),ref:this.bindHtmlElement},React.createElement("header",{onPointerDown:this.keyDownListener,onPointerUp:this.keyUpListener,onPointerMove:this.mouseMove,className:d()("app-window-header",{"full-element-header":o})},React.createElement("div",{className:d()("app-window-action",{"full-element":o})},React.createElement("span",{className:"icon",onClick:this.handleAppHidden},React.createElement(L,{type:"icon-minus-bold"})),React.createElement("span",{className:"icon",onClick:this.handleAppFullScreen},React.createElement(L,{type:"icon-electronics"})),React.createElement("span",{className:"icon"},React.createElement(L,{type:"icon-close-bold"}))),React.createElement("span",{className:d()("app-window-title")},this.appInstance.appName),React.createElement("div",{className:d()("app-window-setting")})),React.createElement(c,{next:this.next,prev:this.prev}))}}const tt=et,nt=t=>{const{}=t,e=(0,P.s0)(),[n,i]=(0,f.useState)([]);(0,f.useEffect)(()=>{if(We()){e("/entry");return}let a=w.subscribe(E.appChange,(u,c)=>{i(V())});return()=>{a()}},[]);const r=a=>{xe(a,Fe(a)),i(V())},o=n.map(a=>React.createElement(tt,{appInstance:a,key:a.appId})),s=ze().map(a=>React.createElement(De,{key:a.appId,appName:a.appName,appInstance:a,onStartUpApp:r}));return React.createElement("section",{className:d()("platform-root-container")},React.createElement(He,null,o),React.createElement(Be,null,s))},it=[{path:"/",children:[{element:React.createElement(nt,null),path:"/",index:!0},{element:React.createElement(je,null),path:"entry"}]}];function le(t){return React.createElement(P.AW,{path:t.path,key:t.path,element:t.element,children:t.children})}function rt(t){return(0,f.useMemo)(()=>t.map(e=>React.createElement(P.Z5,{key:e.path,children:Array.isArray(e.children)?e.children.map(n=>le(n)):le(e)})),[])}var at=m(487),A=m(855),y=m(578),ce=m(460);const ot=t=>{const{next:e}=t;return React.createElement(A.W2,{maxW:"container.xl",bgColor:"whiteAlpha.50"},React.createElement(y.mQ,null,React.createElement(y.td,null,React.createElement(y.OK,null,"One"),React.createElement(y.OK,null,"Two"),React.createElement(y.OK,null,"Three")),React.createElement(y.nP,null,React.createElement(y.x4,null,React.createElement("p",null,"one!")),React.createElement(y.x4,null,React.createElement("p",null,"two!")),React.createElement(y.x4,null,React.createElement("p",null,"three!")))))},st=t=>React.createElement("section",null,React.createElement(A.M5,null,React.createElement("h1",null,"Set2")),React.createElement(A.M5,{bg:"tomato",h:"100px"},React.createElement(ce.zx,{colorScheme:"blue",onClick:t.next},"Next"))),lt=t=>React.createElement("section",null,React.createElement(A.M5,null,React.createElement("h1",null,"Set3")),React.createElement(A.M5,{bg:"tomato",h:"100px"},React.createElement(ce.zx,{colorScheme:"blue",onClick:t.next},"Next")));_("setUp",ot),_("setUp",st),_("setUp",lt);function ct(){let t=rt(it);return console.log(React.createElement("div",null,"11223")),React.createElement(f.StrictMode,null,React.createElement(at.xjn,null,React.createElement(pe.VK,null,t)))}const ut=document.getElementById("bootstrap");function pt(){(0,U.render)(React.createElement(ct,null),ut)}pt()}},S=>{var $=U=>S(S.s=U);S.O(0,[983],()=>$(157));var m=S.O()}]);
