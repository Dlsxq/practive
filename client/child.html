<!DOCTYPE HTML>
<html>

<head>
  <title>Shared workers: demo 1</title>
</head>

<body>
  <input type="text" name="" id="txt">
  <button id="send">send</button>
  <br />
  <br />
  <label for="result">child:</label>
  <textarea name="" id="result" cols="30" rows="10" readonly></textarea>

  <script>
    // const worker = new SharedWorker("/src/channel/sharedWork.js",{name:"main-worker"}); // 名字相同
    // worker.port.start(); // note: need this when using addEventListener

    // const send = document.getElementById('send');
    // const result = document.getElementById("result");
    // const text = document.getElementById("txt");

    // worker.port.addEventListener('message', function (e) {
    //   result.value = e.data;
    // }, false);


    // send.addEventListener('click', function (e) {
    //   if (text.value === "cancel") {
    //     worker.port.close();
    //     return
    //   }
    //   worker.port.postMessage(`child(${text.value})`);
    // }, false);
console.log("child");
    globalThis.addEventListener("storage", evl => {
      console.log(evl);
    })

    /* 
      监听器 注册
      在不同的页面中，localstroage的设置会触发，并不会触发本页面的设置
      sessionstroage 的设置不会触发本页面的页面的监听。不会被共享
    
    */
  </script>
</body>

</html>